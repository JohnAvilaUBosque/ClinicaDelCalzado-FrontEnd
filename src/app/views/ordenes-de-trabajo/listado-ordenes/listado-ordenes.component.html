<c-card>
    <c-card-header>
        <h5>Listado órdenes de trabajo</h5>
    </c-card-header>
    <c-card-body>
        <p>Órdenes de trabajo de la más reciente a la más antigua.</p>
        <div class="overflow-y-auto">
            <table cTable hover striped>
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">Estado orden</th>
                        <th scope="col">Número</th>
                        <th scope="col">Atendido por</th>
                        <th scope="col">Fecha creación</th>
                        <th scope="col">Identificación cliente</th>
                        <th scope="col">Nombre cliente</th>
                        <th scope="col">Celular cliente</th>
                        <th scope="col">Cantidad servicios</th>
                        <th scope="col">Fecha entrega</th>
                        <th scope="col">Precio total</th>
                        <th scope="col">Abonado</th>
                        <th scope="col">Saldo</th>
                        <th scope="col">Estado pago</th>
                    </tr>
                </thead>
                <tbody>
                    @for (orden of ordenes; track orden.orderNumber) {
                    <tr>
                        <td>
                            <button cButton color="primary" variant="ghost" size="sm" shape="rounded-pill"
                                cTooltip="Ver orden" (click)="verOrden(orden)">
                                <svg cIcon name="cil-external-link"></svg>
                            </button>
                        </td>
                        <td>
                            <c-badge
                                color="{{orden.orderStatus == constService.ESTADO_ORDEN.VIGENTE ? 'info' : orden.orderStatus == constService.ESTADO_ORDEN.ANULADA ? 'danger' : 'success' }}"
                                shape="rounded-pill">
                                {{orden.orderStatus | uppercase}}
                            </c-badge>
                        </td>
                        <th scope="row">{{orden.orderNumber}}</th>
                        <td>{{orden.attendedBy}}</td>
                        <td>{{orden.createDate | date:constService.FORMATS_VIEW.DATETIME }}</td>
                        <td>{{orden.client.identification}}</td>
                        <td>{{orden.client.name}}</td>
                        <td>{{orden.client.cellphone}}</td>
                        <td>{{orden.servicesCount}}</td>
                        <td>{{orden.deliveryDate | date:constService.FORMATS_VIEW.DATE}}</td>
                        <td>{{orden.totalValue | currency: 'COP' : 'symbol-narrow' : '1.0'}}</td>
                        <td>{{orden.downPayment | currency: 'COP' : 'symbol-narrow' : '1.0'}}</td>
                        <td>{{orden.balance | currency: 'COP' : 'symbol-narrow' : '1.0'}}</td>
                        <td>
                            <c-badge
                                color="{{orden.paymentStatus == constService.ESTADO_PAGO.PENDIENTE ? 'warning' : 'success'}}"
                                shape="rounded-pill">
                                {{orden.paymentStatus | uppercase}}
                            </c-badge>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </c-card-body>
</c-card>